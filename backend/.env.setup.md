# Environment Variables Configuration

## Backend Environment Variables

### Database Configuration
```env
# PostgreSQL Database
DB_HOST=localhost              # Database host
DB_PORT=5432                   # Database port
DB_NAME=news_portal            # Database name
DB_USER=postgres               # Database user
DB_PASSWORD=postgres           # Database password
DB_DIALECT=postgres            # Sequelize dialect
```

### Server Configuration
```env
PORT=5000                      # Server port
NODE_ENV=development           # Environment (development/production)
```

### JWT Configuration
```env
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRY=7d                  # Token expiry time (7 days)
```

### CORS Configuration
```env
FRONTEND_URL=http://localhost:5173    # Frontend URL for CORS
```

---

## Production Recommendations

### Security
```env
# Change to a strong random string (minimum 32 characters)
JWT_SECRET=<generate-strong-random-string-here>

# Use HTTPS only
NODE_ENV=production

# Restricted CORS origin
FRONTEND_URL=https://yourdomain.com
```

### Database
```env
DB_HOST=your-production-db-host
DB_PORT=5432
DB_NAME=news_portal_prod
DB_USER=prod_user
DB_PASSWORD=<strong-password>
```

### Server
```env
PORT=5000
NODE_ENV=production
```

---

## Generate Strong JWT Secret

```bash
# Using OpenSSL
openssl rand -base64 32

# Using Node.js
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Using Python
python -c "import secrets; print(secrets.token_hex(32))"
```

---

## Environment File Structure

```
backend/
├── .env              # Local development (DO NOT COMMIT)
├── .env.example      # Template (COMMIT this)
├── .env.production   # Production secrets (DO NOT COMMIT)
└── .env.test         # Testing configuration
```

---

## Common Configuration Scenarios

### Local Development
```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=news_portal
DB_USER=postgres
DB_PASSWORD=postgres
PORT=5000
NODE_ENV=development
JWT_SECRET=dev_secret_key_for_development_only
FRONTEND_URL=http://localhost:5173
```

### Docker Environment
```env
DB_HOST=postgres-service  # Service name from docker-compose
DB_PORT=5432
DB_NAME=news_portal
DB_USER=postgres
DB_PASSWORD=postgres
PORT=5000
NODE_ENV=development
```

### Production AWS RDS
```env
DB_HOST=news-portal-db.xxxxx.us-east-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=news_portal_prod
DB_USER=dbadmin
DB_PASSWORD=<RDS-Master-Password>
PORT=5000
NODE_ENV=production
JWT_SECRET=<strong-random-secret>
FRONTEND_URL=https://newportal.com
```

---

## Setup Instructions

1. **Copy template file:**
   ```bash
   cp .env.example .env
   ```

2. **Update values:**
   ```bash
   nano .env  # or use your preferred editor
   ```

3. **Verify configuration:**
   ```bash
   npm run dev
   ```

---

## Testing Environment Variables

```javascript
// In your code
console.log('Database:', process.env.DB_NAME);
console.log('Port:', process.env.PORT);
console.log('Environment:', process.env.NODE_ENV);

// This will help verify all variables are loaded correctly
```

---

## Troubleshooting

### "Cannot connect to database"
- Verify `DB_HOST` and `DB_PORT`
- Check `DB_NAME` exists: `psql -l`
- Verify `DB_USER` and `DB_PASSWORD`

### "JWT_SECRET not defined"
- Ensure `.env` file exists
- Run `npm install dotenv` if missing
- Server needs restart after changing `.env`

### "Port already in use"
- Change PORT in `.env`
- Or kill process: `lsof -i :5000`

---

**Last Updated:** February 2026
